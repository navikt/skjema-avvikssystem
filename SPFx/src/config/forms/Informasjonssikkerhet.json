{
    "title": "Informasjonssikkerhet",
    "conditionalOptions": {
        "Personopplysninger på avveie": [
            "Brev er sendt til feil mottakere",
            "Brev er sendt til feil arbeidsgiver",
            "Opplysninger som følger med i brev til annen bruker",
            "E-post og SMS sendt til feil mottager",
            "Opplysninger som er registrert på feil bruker",
            "Dokumenter er skannet inn på feil bruker",
            "Feil i et IT-system",
            "Avvik begått av databehandler",
            "Tap av utstyr, telefoner, bærbar pc",
            "Overhøring av samtaler som inneholder taushetsbelagte personopplysninger",
            "Oppslag uten tjenstlig behov",
            "Annet"
        ]
    },
    "description": {
        "type": "html",
        "content": "<div style='padding: 5px 10px'> <h3 style='margin-left: 15px'>Kategorier</h3> <ul> <li>Personopplysninger på avveie</li> <li>Brudd på policy/retningslinjer</li> <li>Andre uønskede hendelser</li> </ul> </div>"
    },
    "pages": [
        {
            "key": 1,
            "title": "Gjelder det en statlig eller kommunal tjeneste?",
            "type": "Input",
            "fields": [
                {
                    "key": "stateOrMunicipality",
                    "type": "ChoiceGroup",
                    "options": [
                        "Statlig",
                        "Kommunal"
                    ],
                    "required": "true"
                }
            ],
            "messages": [
                {
                    "display": "state.values.stateOrMunicipality && state.values.stateOrMunicipality !== 'Statlig'",
                    "type": "info",
                    "content": "For øyeblikket kan kun avvik for statlige tjenester rapporteres."
                }
            ],
            "actions": [
                {
                    "key": "previous",
                    "label": "Tilbake",
                    "type": "default",
                    "iconProps": {
                        "iconName": "ChevronLeft"
                    },
                    "invoke": {
                        "functionName": "ToFormSelection"
                    }
                },
                {
                    "key": "next",
                    "label": "Neste",
                    "type": "default",
                    "iconProps": {
                        "iconName": "ChevronRight"
                    },
                    "iconPosition": "right",
                    "disabled": "!state.values.stateOrMunicipality || state.values.stateOrMunicipality !== 'Statlig'",
                    "invoke": {
                        "functionName": "NextPage",
                        "params": {
                            "state_pageNumber": "currentPageNumber",
                            "setstate": "currentPageNumber"
                        }
                    }
                }
            ]
        },
        {
            "key": 2,
            "title": "Velg kategori",
            "type": "Input",
            "fields": [
                {
                    "key": "category",
                    "type": "ChoiceGroup",
                    "options": [
                        "Personopplysninger på avveie",
                        "Brudd på policy/retningslinjer",
                        "Andre uønskede hendelser"
                    ],
                    "required": "true"
                }
            ],
            "actions": [
                {
                    "key": "previous",
                    "label": "Tilbake",
                    "type": "default",
                    "iconProps": {
                        "iconName": "ChevronLeft"
                    },
                    "invoke": {
                        "functionName": "PreviousPage",
                        "params": {
                            "state_pageNumber": "currentPageNumber",
                            "setstate": "currentPageNumber"
                        }
                    }
                },
                {
                    "key": "next",
                    "label": "Neste",
                    "type": "default",
                    "iconProps": {
                        "iconName": "ChevronRight"
                    },
                    "iconPosition": "right",
                    "disabled": "!state.valid",
                    "invoke": {
                        "functionName": "NextPage",
                        "params": {
                            "state_pageNumber": "currentPageNumber",
                            "setstate": "currentPageNumber"
                        }
                    },
                    "addtobreadcrumbs": "state.values.category"
                }
            ]
        },
        {
            "key": 3,
            "title": "Velg underkategori",
            "type": "Input",
            "fields": [
                {
                    "key": "categoryDetails",
                    "type": "ChoiceGroup",
                    "options": "form.conditionalOptions[state.values.category]",
                    "required": "form.conditionalOptions[state.values.category]",
                    "hidden": "!(form.conditionalOptions[state.values.category])"
                }
            ],
            "actions": [
                {
                    "key": "previous",
                    "label": "Tilbake",
                    "type": "default",
                    "iconProps": {
                        "iconName": "ChevronLeft"
                    },
                    "invoke": {
                        "functionName": "PreviousPage",
                        "params": {
                            "state_pageNumber": "currentPageNumber",
                            "setstate": "currentPageNumber"
                        }
                    },
                    "removefrombreadcrumbs": "state.values.category"
                },
                {
                    "key": "next",
                    "label": "Neste",
                    "type": "default",
                    "iconProps": {
                        "iconName": "ChevronRight"
                    },
                    "iconPosition": "right",
                    "disabled": "!state.values.categoryDetails",
                    "invoke": {
                        "functionName": "NextPage",
                        "params": {
                            "state_pageNumber": "currentPageNumber",
                            "setstate": "currentPageNumber"
                        }
                    },
                    "addtobreadcrumbs": "state.values.categoryDetails"
                }
            ]
        },
        {
            "key": 4,
            "type": "Input",
            "fields": [
                {
                    "key": "unit",
                    "label": "Hvilken enhet gjelder avviket?",
                    "type": "ChoiceGroup",
                    "options": [
                        "Min enhet",
                        "Annen enhet"
                    ],
                    "required": "true",
                    "defaultValue": "Min enhet",
                    "disabledOptions": [
                        "Annen enhet"
                    ],
                    "additionalData": [
                        {
                            "key": "Min enhet",
                            "value": "context.unit"
                        }
                    ]
                },
                {
                    "key": "unitOther",
                    "label": "Hvis annen enhet: Velg enhet",
                    "type": "Choice",
                    "options": [
                        "Enhet 1",
                        "Enhet 2"
                    ],
                    "hidden": "!(state.values.unit === 'Annen enhet')",
                    "required": "state.values.unit === 'Annen enhet'"
                },
                {
                    "key": "timeOfIncident",
                    "label": "Når skjedde avviket?",
                    "type": "Date",
                    "required": "true"
                },
                {
                    "key": "timeOfDiscovery",
                    "label": "Når ble avviket oppdaget?",
                    "type": "DateTime",
                    "required": "true"
                },
                {
                    "key": "incidentDuration",
                    "label": "Hvor lenge varte avviket?",
                    "type": "DateTime",
                    "disabled": "!state.values.timeOfDiscovery",
                    "minDate": "state.values.timeOfDiscovery",
                    "valid": "state.values.timeOfDiscovery < state.values.incidentDuration",
                    "errorMessage": "Slutttidspunktet må være etter starttidspunktet",
                    "hidden": "state.values.category !== 'Personopplysninger på avveie'",
                    "required": "state.values.category === 'Personopplysninger på avveie'"
                },
                {
                    "key": "isExternalReporter",
                    "label": "Gjelder det en ekstern innmelding?",
                    "type": "ChoiceGroup",
                    "options": [
                        "Ja",
                        "Nei"
                    ],
                    "required": "true",
                    "hidden": "state.values.category !== 'Personopplysninger på avveie'"
                },
                {
                    "key": "externalReporter",
                    "label": "Oppgi navn og telefonnummer på ekstern innmelder",
                    "type": "Text",
                    "placeholder": "Ola Normann, 47101112",
                    "multiline": "true",
                    "hidden": "!(state.values.isExternalReporter === 'Ja')",
                    "required": "state.values.isExternalReporter === 'Ja'"
                },
                {
                    "key": "affectedPeopleCount",
                    "label": "Antall berørte:",
                    "type": "Number",
                    "hidden": "state.values.category !== 'Personopplysninger på avveie'",
                    "required": "state.values.category === 'Personopplysninger på avveie'"
                },
                {
                    "key": "affectedPeople",
                    "label": "Hvem er de berørte?",
                    "type": "Text",
                    "multiline": "true",
                    "placeholder": "Oppgi navn og personnummer, ett per linje",
                    "hidden": "state.values.category !== 'Personopplysninger på avveie'",
                    "required": "state.values.category === 'Personopplysninger på avveie'"
                },
                {
                    "key": "informationType",
                    "label": "Hvilken type personopplysninger er berørt?",
                    "type": "Text",
                    "multiline": "true",
                    "hidden": "state.values.category !== 'Personopplysninger på avveie'",
                    "required": "state.values.category === 'Personopplysninger på avveie'"
                },
                {
                    "key": "incidentDescription",
                    "label": "Hva har skjedd?",
                    "type": "Text",
                    "placeholder": "Beskriv avviket, mulig årsak og eventuelle konsekvenser",
                    "multiline": "true",
                    "required": "true"
                },
                {
                    "key": "imediateMeasuresDescription",
                    "label": "Beskriv eventuelle iverksatte strakstiltak:",
                    "type": "Text",
                    "multiline": "true"
                },
                {
                    "key": "measureSuggestionsDescription",
                    "label": "Har du forslag til tiltak for å unngå at noe slikt skjer igjen?",
                    "type": "Text",
                    "multiline": "true",
                    "required": "true"
                }
            ],
            "actions": [
                {
                    "key": "previous",
                    "label": "Tilbake",
                    "type": "default",
                    "iconProps": {
                        "iconName": "ChevronLeft"
                    },
                    "invoke": {
                        "functionName": "PreviousPage",
                        "params": {
                            "state_pageNumber": "currentPageNumber",
                            "setstate": "currentPageNumber"
                        }
                    },
                    "removefrombreadcrumbs": "state.values.categoryDetails"
                },
                {
                    "key": "next",
                    "label": "Neste",
                    "type": "default",
                    "iconProps": {
                        "iconName": "ChevronRight"
                    },
                    "iconPosition": "right",
                    "disabled": "!state.valid || !context.unit",
                    "invoke": {
                        "functionName": "NextPage",
                        "params": {
                            "state_pageNumber": "currentPageNumber",
                            "setstate": "currentPageNumber"
                        }
                    }
                }
            ]
        },
        {
            "key": 5,
            "title": "Verifiser opplysningene som er registrert",
            "type": "Summary",
            "values": "state.values",
            "actions": [
                {
                    "key": "previous",
                    "label": "Tilbake",
                    "type": "default",
                    "iconProps": {
                        "iconName": "ChevronLeft"
                    },
                    "invoke": {
                        "functionName": "PreviousPage",
                        "params": {
                            "state_pageNumber": "currentPageNumber",
                            "setstate": "currentPageNumber"
                        }
                    }
                },
                {
                    "key": "submit",
                    "label": "Send inn",
                    "type": "primary",
                    "invoke": {
                        "functionName": "Submit",
                        "params": {
                            "state_values": "values"
                        }
                    }
                }
            ]
        }
    ]
}